<% provide(:title, "All Entertainment") %>
<div class="container">
	<h1>All Entertainment</h1><br>
	<table class="table table-striped table-bordered">
		<tr>
			<th>Name</th>
			<th>Category</th>
			<th>Average Rating</th>
			<th>Ratings Count</th>
		</tr>
	
		<% @revieweds.each do |reviewed| %>
		<tr>
			<td><%= link_to(reviewed.name, reviewed) %></td>
			
			<% if reviewed.category %>
				<td><%= reviewed.category.name %></td>
			<% else %>
				<td><%="N/a"%><td>
			<% end %>
	
			<% if reviewed.rating_count > 0 %>
				<td><div class="star-rating" data-score= <%= reviewed.average_rating %> ></div>(<%= reviewed.average_rating %>)</td>

			<% else %>
				<td><%=nil%><td>
			<% end %>
	
			<% if reviewed.rating_count >0%>
				<td><%= reviewed.rating_count %></td>
			<% else %>
				<td><%=nil%><td>
			<% end %>
		</tr>
		<% end %>
	</table>
</td>

<script>
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
    $('.star-rating').raty({
        starOn: '<%= image_path('star-on.png') %>',
        starOff: '<%= image_path('star-off.png') %>',
        path: '',
        readOnly: true,

        score: function(){
            return $(this).attr('data-score');
        }
    });
  </script>